@if (Session["FormLists"] != null)
{
    var items = (IEnumerable<CRMS.Core.ViewModel.FormMstViewModel>)Session["FormLists"];
    foreach (var item in items.Where(s => s.ParentForm == null).GroupBy(Obj => new { Obj.Id }).Distinct().ToList())
    {
        var data = items.Where(s => s.ParentFormId == item.FirstOrDefault().Id).ToList();
        if (data.Count == 0)
        {
            <li><a>@item.FirstOrDefault().Name</a></li>
        }
        else
        {
            <li>
                <a class="popout" href="">@item.FirstOrDefault().Name</a>
                <ul class="level2 dropdown-menu">
                    @foreach (var firstItem in data)
                    {
                        <li><a class="" href="">@firstItem.Name</a></li>
                    }
                </ul>
            </li>
        }
    }
}


@*<script>
        $.ajax({
            url: "/Index/FormMst",
            type: "GET",
            dataType: "json",
            success: function (data) {
                $.each(data, function (index, item) {
                    if (item.ParentForm == null) {
                        if (item.Children.length == 0) {
                            $("<li><a>" + item.Name + "</a></li>").appendTo("#my-list");
                        }
                        else {
                            var li = $("<li><a class='popout' href=''>" + item.Name + "</a></li>").appendTo("#my-list");
                            var ul = $("<ul class='level2 dropdown-menu'></ul>").appendTo(li);
                            $.each(item.Children, function (i, child) {
                                $("<li><a class='' href=''>" + child.Name + "</a></li>").appendTo(ul);
                            });
                        }
                    }
                });
            },
            error: function (xhr, status, error) {
                console.log(error);
            }
        });
    </script>

*@


@*
    <script type="text/javascript">
        $(function () {
            //Remove the style attributes.
            $(".navbar-nav li, .navbar-nav a, .navbar-nav ul").removeAttr('style');

            //Apply the Bootstrap class to the Submenu.
            $(".dropdown-menu").closest("li").removeClass().addClass("dropdown-toggle");

            //Apply the Bootstrap properties to the Submenu.
            $(".dropdown-toggle").find("a").eq(0).attr("data-toggle", "dropdown").attr("aria-haspopup", "true").attr("aria-expanded", "false").append("<span class='caret'></span>");

            //Apply the Bootstrap "active" class to the selected Menu item.
            $("a.selected").closest("li").addClass("active");
            $("a.selected").closest(".dropdown-toggle").addClass("active");
        });
    </script>
*@